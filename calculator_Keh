using System;
using System.Collections.Generic;

abstract class SimpleCalculator
{
    protected List<string> numbers = new List<string>(); // List to store input numbers
    protected List<char> operators = new List<char>();   // List to store input operators

    // Method to get input from the user
    protected void GetInput()
    {
        while (true)
        {
            try
            {
                Console.Write("PLEASE! Enter a number: ");
                string num = NumberInput(); // Get numerical input from the user

                Console.Write("Enter an operator (+, -, *, /) or '=' to calculate: ");
                char op = OperatorInput(); // Get operator input from the user

                numbers.Add(num);   // Add the number to the list of numbers
                operators.Add(op); // Add the operator to the list of operators

                if (op == '=') // Break the loop if the user inputs '='
                    break;
            }
            catch (FormatException)
            {
                Console.WriteLine("NYAK!! Invalid input! Please enter a numerical value or '=' to calculate.");
            }
        }
    }

    // Method to perform the calculation
    protected double Calculate()
    {
        double result = Convert.ToDouble(numbers[0]); // Initialize result with the first number
        for (int i = 0; i < operators.Count; i++)    // Loop through the operators
        {
            switch (operators[i])
            {
                case '+': // Addition operation
                    result += Convert.ToDouble(numbers[i + 1]);
                    break;
                case '-': // Subtraction operation
                    result -= Convert.ToDouble(numbers[i + 1]);
                    break;
                case '*': // Multiplication operation
                    result *= Convert.ToDouble(numbers[i + 1]);
                    break;
                case '/': // Division operation
                    if (Convert.ToDouble(numbers[i + 1]) == 0) // Check for division by zero
                    {
                        Console.WriteLine("Cannot divide by zero!");
                        return double.NaN;
                    }
                    result /= Convert.ToDouble(numbers[i + 1]);
                    break;
            }
        }
        return result;
    }

    // Method to get numerical input from the user
    protected string NumberInput()
    {
        while (true)
        {
            string input = Console.ReadLine();
            if (double.TryParse(input, out double result))
                return result.ToString();
            else
                Console.WriteLine("NYAK!! Invalid input! Please enter a numerical value.");
        }
    }

    // Method to get operator input from the user
    protected char OperatorInput()
    {
        while (true)
        {
            string input = Console.ReadLine();
            if (input.Length == 1 && "+-*/=".Contains(input))
                return input[0];
            else
                Console.WriteLine("NYAK!! Invalid input! Please enter a valid operator (+, -, *, /) or '=' to calculate.");
        }
    }

    // Abstract method for performing the calculation (to be implemented by subclasses)
    public abstract void PerformCalculation();
}

class BasicCalculator : SimpleCalculator
{
    // Method to perform the calculation and handle user interaction
    public override void PerformCalculation()
    {
        while (true)
        {
            GetInput(); // Get input from the user
            double result = Calculate(); // Perform the calculation
            Console.WriteLine("Result: " + result); // Display the result

            // Ask the user if they want to perform another calculation
            Console.Write("Do you want to perform another calculation? (G lang/ayoko na): ");
            string choice = Console.ReadLine().ToLower();

            if (choice == "ayoko na") // Break the loop if the user wants to stop
                break;

            numbers.Clear();    // Clear the list of numbers for the next calculation
            operators.Clear();  // Clear the list of operators for the next calculation
        }
        Console.WriteLine("Thank you for using Calculanot 2.0! Goodbye!");
    }
}

class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Welcome to Calculanot 2.0");

        BasicCalculator calculator = new BasicCalculator();
        calculator.PerformCalculation();
    }
}

