
using System;
using System.Collections.Generic;
using System.Text;

namespace CalculatorApp
{
    // Base class representing arithmetic operations
    public abstract class Operation
    {
        public abstract double PerformOperation(double num1, double num2);
    }

    // Addition operation class inherits from Operation class
    public class Addition : Operation
    {
        public override double PerformOperation(double num1, double num2)
        {
            return num1 + num2;
        }
    }

    // Subtraction operation class inherits from Operation class
    public class Subtraction : Operation
    {
        public override double PerformOperation(double num1, double num2)
        {
            return num1 - num2;
        }
    }

    // Multiplication operation class inherits from Operation class
    public class Multiplication : Operation
    {
        public override double PerformOperation(double num1, double num2)
        {
            return num1 * num2;
        }
    }

    // Division operation class inherits from Operation class
    public class Division : Operation
    {
        public override double PerformOperation(double num1, double num2)
        {
            if (num2 != 0)
            {
                return num1 / num2;
            }
            else
            {
                throw new ArgumentException("Cannot divide by zero.");
            }
        }
    }

    // Calculator class
    public class Calculator
    {
        private Operation operation;

        // Method to perform calculation
        public double PerformCalculation(List<double> numbers, List<string> operators)
        {
            double result = numbers[0];

            for (int i = 0; i < operators.Count; i++)
            {
                switch (operators[i])
                {
                    case "+":
                        operation = new Addition();
                        break;
                    case "-":
                        operation = new Subtraction();
                        break;
                    case "*":
                        operation = new Multiplication();
                        break;
                    case "/":
                        operation = new Division();
                        break;
                    default:
                        throw new ArgumentException("Invalid operator.");
                }

                result = operation.PerformOperation(result, numbers[i + 1]);
            }

            return result;
        }
    }

    // Main program class
    public class Program
    {
        static void Main(string[] args)
        {
            Calculator calculator = new Calculator();
            bool repeat = true;

            while (repeat)
            {
                List<double> numbers = new List<double>();
                List<string> operators = new List<string>();

                Console.WriteLine("Enter a numerical value:");

                string input = Console.ReadLine();

                while (input != "=")
                {
                    if (double.TryParse(input, out double number))
                    {
                        numbers.Add(number);
                        Console.WriteLine("Enter an operator (+, -, *, /) or '=' to display result:");
                    }
                    else if (input == "+" || input == "-" || input == "*" || input == "/")
                    {
                        operators.Add(input);
                        Console.WriteLine("Enter a numerical value:");
                    }
                    else
                    {
                        Console.WriteLine("Invalid input. Please enter a numerical value or '=' to display result:");
                    }

                    input = Console.ReadLine();
                }

                try
                {
                    double result = calculator.PerformCalculation(numbers, operators);
                    Console.WriteLine("Result: " + result);
                }
                catch (Exception ex)
                {
                    Console.WriteLine("Error: " + ex.Message);
                }

                Console.WriteLine("Would you like to perform another calculation? Please enter 'yes' to continue or 'no' to exit.");
                string choice = Console.ReadLine();

                if (choice.ToLower() != "yes")
                {
                    repeat = false;
                }
            }
        }
    }
}

























  
    
